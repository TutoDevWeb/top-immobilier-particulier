<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
	<title>Geocodage des villes</title>
	<meta charset="UTF-8">
	<script
		src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAtggiWJMus6LWKUua04wt_RTASDNGt1Ah7UMjIzjNf91KosJQYhT2_N2tGBVmUwT_PKT4VUzPoyhomg"
		type="text/javascript"></script>
</head>

<body>
	<script type="text/JavaScript">
var geocoder = new GClientGeocoder();;

var list_ville = new Array('Toulon,France','Marseille,France','Nice,France','Cannes,France');

var i=0;
function send_requete() {

  console.log("Envoi d'une requï¿½te");
  geocoder.getLocations(list_ville[i], addAddressToMap);

  if ( i == 3 ) clearInterval(timeInterval);
  i++;

}

function addAddressToMap(response) {
  if (!response || response.Status.code != 200) {
    console.log("Sorry, we were unable to geocode that address");
  } else {
    place = response.Placemark[0];
    point = new GLatLng(place.Point.coordinates[1],
                        place.Point.coordinates[0]);
    console.log(place.address)
		console.log(point.lat());										
		console.log(point.lng());
    console.log('------------------');
  }

}


timeInterval = setInterval(send_requete,5000);
</script>
</body>

</html>